/* Tailwind CSS directives */
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Static CSS variables - no dynamic theming */
    --radius: 5.8rem;

    /* VS Code theme colors - Direct hex values */
    --background: #181829;
    --foreground: #d4d4d4;
    --card: #181829;
    --card-foreground: #eba5a5;
    --primary: #569cd6;
    --primary-foreground: #ffffff;
    --secondary: #4fc1ff;
    --secondary-foreground: #adadad;
    --accent: #e04539;
    --accent-foreground: #ffffff;
    --muted: #201e31;
    --muted-foreground: #9ca3af;
    --border: #3b3b68;
    --input: #949494;
    --ring: #569cd6;
    --destructive: #f44747;
    --destructive-foreground: #ffffff;
    --popover: #8f8f8f;
    --popover-foreground: #d4d4d4;

    /* Additional VS Code colors for enhanced theming */
    --success: #4ec9b0;
    --warning: #dcdcaa;
    --info: #4fc1ff;
    --code-background: #1e1e1e;
    --code-border: #464647;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  /* Hide scrollbars but keep scrolling functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Smooth scrolling for chat messages */
  .chat-messages {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch; /* iOS momentum scrolling */
  }

  /* Enhanced smooth scrolling for all scrollable elements */
  .scrollable {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }

  /* Smooth scrolling for the entire document */
  html {
    scroll-behavior: smooth;
  }

  /* Optimize font rendering */
  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* More rounded corners implementation */
  html {
    background: var(--background) !important;
    margin: 0 !important;
    padding: 0 !important;
    border-radius: 20px !important;
    -electron-corner-smoothing: 80% !important; /* More rounded squircle corners */
    overflow: hidden !important;
    width: 100vw !important;
    height: 100vh !important;
    position: relative !important;
  }

  body {
    background: var(--background) !important;
    color: var(--foreground) !important;
    margin: 0 !important;
    padding: 0 !important;
    border-radius: 20px !important;
    -electron-corner-smoothing: 80% !important; /* More rounded squircle corners */
    overflow: hidden !important;
    width: 100vw !important;
    height: 100vh !important;
    position: relative !important;

    /* Prevent any scaling issues */
    transform: none !important;
    zoom: normal !important;
    scale: 1 !important;
    -webkit-transform: none !important;
    -moz-transform: none !important;
    -ms-transform: none !important;
  }

  #__next {
    background: var(--background) !important;
    border-radius: 20px !important;
    -electron-corner-smoothing: 80% !important; /* More rounded squircle corners */
    overflow: hidden !important;
    width: 100% !important;
    height: 100% !important;
    position: relative !important;
    min-height: 100vh !important;
  }

  /* Force main app container background */
  .h-screen.w-full {
    background: var(--background) !important;
    color: var(--foreground) !important;
  }

  /* Force all main containers */
  html, body, #__next, [class*="h-screen"], [class*="w-full"] {
    background-color: var(--background) !important;
    color: var(--foreground) !important;
  }

  /* Force rounded corners on all elements */
  * {
    box-sizing: border-box !important;
  }

  /* Simplified styling using CSS variables */
  .card, [data-radix-dialog-content] {
    background: var(--card) !important;
    border: 1px solid var(--border) !important;
    color: var(--card-foreground) !important;
    border-radius: 16px !important;
  }

  /* Force buttons and inputs to be solid */
  button, input, textarea, select {
    background: var(--muted) !important;
    color: var(--foreground) !important;
    border: 1px solid var(--border) !important;
    border-radius: 12px !important;
  }

  button:hover {
    background: var(--accent) !important;
  }

  /* Enhanced animations for thinking indicator */
  @keyframes thinking-bounce {
    0%, 80%, 100% {
      transform: scale(0);
      opacity: 0.5;
    }
    40% {
      transform: scale(1);
      opacity: 1;
    }
  }

  .thinking-dot {
    animation: thinking-bounce 1.4s infinite ease-in-out both;
  }

  .thinking-dot:nth-child(1) { animation-delay: -0.32s; }
  .thinking-dot:nth-child(2) { animation-delay: -0.16s; }
  .thinking-dot:nth-child(3) { animation-delay: 0s; }

  /* Chat bubble colors use Tailwind classes - no overrides needed */

  /* Ensure card content inherits colors */
  .user-message .card-content,
  .user-message [data-radix-card-content],
  .bg-primary .card-content,
  .bg-primary [data-radix-card-content] {
    background: transparent !important;
    color: white !important;
  }

  .assistant-message .card-content,
  .assistant-message [data-radix-card-content],
  .bg-muted .card-content,
  .bg-muted [data-radix-card-content] {
    background: transparent !important;
    color: white !important;
  }

  /* Prevent scaling during drag operations */
  .dragging * {
    transform: none !important;
    zoom: normal !important;
    scale: 1 !important;
    -webkit-transform: none !important;
    -moz-transform: none !important;
    -ms-transform: none !important;
  }
}

@layer components {

  /* Ensure dropdown menus and inputs have solid backgrounds */
  [data-radix-select-content],
  [data-radix-popover-content] {
    background-color: var(--card) !important;
    border: 1px solid var(--border) !important;
    color: var(--card-foreground) !important;
    border-radius: 12px !important;
  }

  /* Ensure input fields have solid backgrounds */
  input, textarea, select {
    background: var(--muted) !important;
    color: var(--foreground) !important;
  }

  /* Solid backgrounds for dropdown items */
  [data-radix-select-item],
  .popover-content > * {
    background-color: var(--muted) !important;
    color: var(--foreground) !important;
  }

  [data-radix-select-item]:hover,
  [data-radix-select-item][data-highlighted] {
    background-color: var(--accent) !important;
  }

  /* Hide scrollbars while maintaining functionality */
  .hide-scrollbar {
    /* Firefox */
    scrollbar-width: none !important;
    /* Safari and Chrome */
    -ms-overflow-style: none !important;
    /* Ensure scrolling still works */
    overflow-y: auto;
    overflow-x: hidden;
    /* Smooth scrolling performance */
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }

  .hide-scrollbar::-webkit-scrollbar {
    display: none !important;
    width: 0 !important;
    height: 0 !important;
  }

  .hide-scrollbar::-webkit-scrollbar-track {
    display: none !important;
  }

  .hide-scrollbar::-webkit-scrollbar-thumb {
    display: none !important;
  }

  /* Optimize scrolling for overlay windows */
  .overlay-scroll {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    /* Remove any conflicting properties */
    will-change: auto;
    transform: none;
    contain: none;
  }



  /* Force hide all scrollbars in chat areas */
  .chat-messages {
    scrollbar-width: none !important;
    -ms-overflow-style: none !important;
  }

  .chat-messages::-webkit-scrollbar {
    display: none !important;
    width: 0 !important;
    height: 0 !important;
  }
}
